{% extends 'oweb/account_base.html' %}

{% block oweb_account %}
<section class="account_overview">
    <header>
        <h1>{{ planet.name }} Overview</h1>
    </header>

    <section>
        <header>Meta</header>
        {{ planet.coord }} | {{ planet_fields }} | {{ planet.min_temp }}
    </section>

    <section>
        <header>Production</header>
        <table>
            <tr>
                <td>Metal:</td>
                <td>{{ production.0 }}</td>
            </tr>
            <tr>
                <td>Crystal:</td>
                <td>{{ production.1 }}</td>
            </tr>
            <tr>
                <td>Deuterium:</td>
                <td>{{ production.2 }}</td>
            </tr>
            <tr>
                <td>Energy:</td>
                <td>{{ production.3 }}</td>
            </tr>
        </table>
    </section>

    <section>
        <header>Queue</header>
        {% if queue %}
        <ol class="queue">
            {% for q in queue %}
                {% with q.4 as detail %}
            <li>
                {{ detail.name }} {{ detail.level }} ({{ q.0 }})
                {% if q.3 > 0 %}need capacity{% endif %}
                <form action="{% url 'oweb:item_update' %}" method="post">
                    {% csrf_token %}
                    <input value="building" name="item_type" type="hidden" />
                    <input value="{{ detail.id }}" name="item_id" type="hidden" />
                    <input value="{{ detail.level }}" name="item_level" type="hidden" />
                    <button type="submit">+</button>
                </form>
            </li>
                {% endwith %}
            {% endfor %}
        </ol>
        {% endif %}
    </section>
</section>
{% endblock %}
